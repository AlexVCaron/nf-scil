process {
    withName: "RECONST_FODF" {
        publishDir = { "${params.outdir}/${task.process.tokenize(':')[-1].tokenize('_')[0].toLowerCase()}" }
        ext.b0_thr_extract_b0 = 10
        ext.dwi_shell_tolerance = 50
        ext.min_fodf_shell_value = 700
        ext.sh_order = 8
        ext.sh_basis = "descoteaux07"
        ext.processes = 4
    }

    withName: "test_reconst_fodf_ssst_with_fodf_shells:RECONST_FODF" {
        ext.fodf_shells = "1000 2000 3000"
    }

    withName: "test_reconst_fodf_msmt:RECONST_FODF" {
        ext.b0_thr_extract_b0 = 10
        ext.dwi_shell_tolerance = 50
        ext.min_fodf_shell_value = 100
        ext.wm_fodf = true
        ext.gm_fodf = true
        ext.csf_fodf = true
        ext.vf = true
        ext.vf_rgb = true
    }
}
